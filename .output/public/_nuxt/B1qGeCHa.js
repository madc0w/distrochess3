import{_ as N}from"./7vXxnD6-.js";import{g as M,v as R,x as T,m as d,j as f,n as V,c as i,a as e,s as g,t as a,k as t,B as A,C as y,D as P,l as k,w as b,o as l,d as x,_ as q}from"./Cy8nOPVn.js";import{u as D}from"./lqf0okqB.js";import{u as I}from"./BLm2Lqux.js";import{u as L}from"./Dx6LfG2l.js";const U={class:"auth-page"},j={class:"auth-shell"},G={class:"auth-card"},K={class:"auth-header"},W={class:"eyebrow"},z={class:"subtitle"},F={class:"form-group"},H={for:"new-password"},J=["placeholder"],O={class:"form-group"},Q={for:"confirm-password"},X=["placeholder"],Y={key:0,class:"alert"},Z=["disabled"],$={key:1,class:"success-copy"},ss={key:2,class:"error"},es={class:"back-home"},ts=M({__name:"reset-password",setup(as){const C=R(),E=T();I(()=>C.replace("/"));const{resetPassword:S}=D(),{t:s}=L(),u=d(""),c=d(""),p=d(!1),o=d(""),_=d(!1),h=f(()=>{const r=E.query.token;return Array.isArray(r)?r[0]||"":typeof r=="string"?r:""}),w=f(()=>!h.value);V([u,c],()=>{o.value&&(o.value="")});async function B(){if(w.value){o.value=s.value.authPage.resetPasswordExpired;return}if(u.value!==c.value){o.value=s.value.passwordsMustMatch;return}p.value=!0,o.value="";try{const r=await S(h.value,u.value);if(!r.success){o.value=r.error||s.value.errors.ERR_GENERIC;return}_.value=!0}finally{p.value=!1}}return(r,n)=>{const m=N;return l(),i("div",U,[n[2]||(n[2]=e("div",{class:"gradient"},null,-1)),e("div",j,[e("div",G,[e("div",K,[e("p",W,a(t(s).distroChess),1),e("h1",null,a(t(s).authPage.resetPasswordTitle),1),e("p",z,a(t(s).authPage.resetPasswordSubtitle),1)]),_.value?(l(),i("div",$,[e("h2",null,a(t(s).authPage.resetPasswordSuccessTitle),1),e("p",null,a(t(s).authPage.resetPasswordSuccessBody),1)])):(l(),i("form",{key:0,class:"form",onSubmit:A(B,["prevent"])},[e("div",F,[e("label",H,a(t(s).password),1),y(e("input",{id:"new-password",type:"password",required:"",autocomplete:"new-password","onUpdate:modelValue":n[0]||(n[0]=v=>u.value=v),placeholder:t(s).enterNewPassword,minlength:"6"},null,8,J),[[P,u.value]])]),e("div",O,[e("label",Q,a(t(s).confirmPassword),1),y(e("input",{id:"confirm-password",type:"password",required:"",autocomplete:"new-password","onUpdate:modelValue":n[1]||(n[1]=v=>c.value=v),placeholder:t(s).enterPasswordAgain,minlength:"6"},null,8,X),[[P,c.value]])]),w.value?(l(),i("div",Y,a(t(s).authPage.resetPasswordExpired),1)):g("",!0),e("button",{type:"submit",class:"primary",disabled:p.value},a(p.value?t(s).pleaseWait:t(s).authPage.resetPasswordCta),9,Z)],32)),o.value?(l(),i("p",ss,a(o.value),1)):g("",!0),e("div",es,[_.value?(l(),k(m,{key:0,to:"/signin",class:"back-link"},{default:b(()=>[x(a(t(s).authPage.backToSignin),1)]),_:1})):(l(),k(m,{key:1,to:"/forgot-password",class:"back-link"},{default:b(()=>[x(a(t(s).forgotPassword),1)]),_:1}))])])])])}}}),ds=q(ts,[["__scopeId","data-v-6e06549c"]]);export{ds as default};
//# sourceMappingURL=B1qGeCHa.js.map
